json.edit_project_form do
  form_props(model: @project) do |f|
    f.hidden_field :id
    f.text_field :name
    f.text_area :description
    f.fields_for :tasks do |task_form|
      task_form.hidden_field :id
      task_form.text_field :title
      task_form.number_field :allotted_time
    end
    f.submit
  end

  json.errors @project.errors.to_hash(true)
end

# Add tasks data with IDs for the frontend
json.tasks do
  json.array! @project.tasks.ordered do |task|
    json.id task.id
    json.title task.title
    json.allotted_time task.allotted_time
    json.position task.position
    json.created_at task.created_at
    json.updated_at task.updated_at
  end
end

json.project do
  json.id @project.id
  json.name @project.name
  json.description @project.description
  json.slug @project.slug
end

json.sortTasksPath sort_tasks_project_path(@project)
